GAMS 32.2.0  rc62c018 Released Aug 26, 2020 WEX-WEI x86 64bit/MS Windows - 09/20/21 11:07:17 Page 1
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
C o m p i l a t i o n


   1  ** sets later to be defined in input file
   2   
   3  ** to be changed
   4   
   5  SETS T times/t1*t24/;
   6  * Number of scenarios
   7  *SETS SCEN scenarios /scen1*%MAXSCEN%/;
   8  SETS SCEN scenarios /scen1*scen20/;
   9  alias(scen, w);
  10  Parameter last_z(scen);
  11   
  12  SCALAR G, GG, start_cost, ramp, uptime, downtime;
  13  G=130;
  14  GG=20;
  15  ramp=50;
  16  UPTIME =3;
  17  DOWNTIME=3;
  18   
  19  TABLE wind(scen,t)
  21  *$INCLUDE %SOLAR%.csv
INCLUDE    C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\wind_scenarios_20.csv
  23  ,t1,t2,t3,t4,t5,t6,t7,t8,t9,t10,t11,t12,t13,t14,t15,t16,t17,t18,t19,t20,t21,t22,t23,t24
  24  scen1,40.788,31.292,31.686,13.104,19.513,17.589,3.982,2.111,5.395,7.339,16.453,12.563,18.552,26.285,25.218,27.124,61.119,61.994,26.851,30.668,33.969,21.804,0.894,5.003
  25  scen2,38.871,29.430,17.177,37.161,36.065,43.551,20.778,15.194,11.549,4.238,15.674,23.131,10.582,18.198,47.717,35.322,42.241,44.180,22.863,32.739,31.534,35.139,47.508,39.488
  26  scen3,40.453,39.543,54.351,7.527,13.003,5.582,10.555,30.856,40.955,2.810,10.196,24.696,1.107,1.261,6.703,28.630,7.813,5.701,29.724,37.637,47.618,20.059,17.157,33.769
  27  scen4,30.964,31.662,21.754,2.502,5.546,11.349,26.873,36.986,52.809,4.681,11.948,7.568,11.216,17.302,12.527,40.069,45.700,39.670,19.931,55.956,60.507,31.742,38.095,38.727
  28  scen5,31.977,44.193,31.514,1.068,6.901,8.509,9.550,14.850,29.701,0.550,15.489,10.324,8.957,3.511,4.151,42.279,31.693,15.346,20.856,27.220,39.239,19.065,12.689,17.604
  29  scen6,44.125,23.932,10.829,6.189,21.050,13.703,25.274,34.905,34.505,8.014,4.363,2.003,14.843,9.970,4.671,40.140,46.915,52.225,39.938,29.705,23.973,21.239,33.044,37.499
  30  scen7,42.361,42.758,33.893,1.576,8.044,8.320,10.711,32.328,44.895,13.217,24.235,41.519,15.350,0.507,8.108,16.188,24.578,31.130,28.765,27.134,35.786,17.934,23.462,31.903
  31  scen8,24.010,15.731,28.429,7.051,6.959,7.177,9.913,2.702,28.548,14.935,23.306,25.621,0.375,2.024,11.126,31.555,25.978,30.023,27.545,27.083,16.445,19.196,18.951,21.620
  32  scen9,31.739,28.197,24.841,0.057,1.148,10.663,18.933,15.737,8.667,5.207,35.804,49.272,21.944,35.804,23.935,24.683,12.825,7.677,24.350,31.201,31.877,33.394,18.536,19.869
  33  scen10,53.992,68.828,63.827,7.661,25.876,36.882,1.569,7.646,2.418,21.509,23.117,3.706,20.109,8.312,4.564,29.517,23.436,33.347,33.934,32.751,23.656,22.811,19.852,2.295
  34  scen11,35.906,40.647,22.324,5.385,21.266,9.214,6.017,6.382,2.859,22.078,14.943,19.075,16.300,30.952,43.881,48.997,46.315,33.619,36.430,30.778,16.032,13.804,14.004,33.443
  35  scen12,21.121,16.353,35.608,1.199,0.799,7.159,3.171,6.269,1.693,5.049,6.014,4.394,7.257,0.202,11.054,31.809,34.371,25.556,19.061,26.158,10.004,30.579,30.212,20.788
  36  scen13,46.383,49.690,45.550,3.904,9.649,10.204,9.996,6.974,9.864,2.449,1.958,3.780,20.149,42.136,53.366,56.735,49.034,47.172,26.451,38.567,33.220,42.018,59.848,73.926
  37  scen14,43.103,45.663,39.525,2.904,21.530,34.186,4.464,18.244,3.407,17.752,24.454,9.595,6.177,9.903,13.875,40.823,28.385,12.174,39.200,41.820,41.778,38.182,10.253,2.632
  38  scen15,37.583,34.645,32.719,19.370,19.987,21.276,1.383,10.348,17.944,16.976,20.339,31.687,1.862,1.024,9.111,49.187,60.406,38.053,22.813,22.300,17.566,46.529,54.186,40.475
  39  scen16,26.222,23.736,29.680,25.646,40.098,42.033,16.438,18.297,20.203,3.928,8.400,15.628,26.087,31.792,40.537,28.131,28.417,25.934,52.851,53.860,33.250,33.507,49.510,55.165
  40  scen17,30.618,13.952,7.782,7.573,23.744,23.919,2.975,6.893,18.567,20.334,31.383,48.316,3.900,23.019,22.115,42.827,40.195,48.733,35.458,48.134,43.028,42.002,35.285,30.583
  41  scen18,36.582,33.992,50.666,17.083,11.431,6.019,30.221,46.971,49.415,23.601,29.279,32.148,8.504,0.920,1.754,31.913,23.320,14.043,25.916,28.322,18.550,39.284,26.472,22.773
  42  scen19,34.352,29.418,29.102,0.592,15.195,6.234,4.431,18.591,21.658,26.181,17.305,12.471,8.995,0.595,6.656,42.025,52.206,48.223,19.233,18.921,21.031,18.374,16.086,17.735
  43  scen20,56.789,57.879,57.190,15.012,39.102,38.643,16.741,26.861,16.576,12.535,38.359,46.995,0.663,12.961,19.233,17.176,19.198,20.429,18.671,18.028,20.283,21.967,31.649,33.541
  45  ;
  46  *alias(solar,wind);
  47   
  48  *Tolerance
  49  scalar tol;
  50  *tol=%TOL%;
  51  tol=0.05;
  52   
  53  * maximum number of iterations in LR
  54  set iter number of subgradient iterations /iter1*iter10/;
  55   
  56  * time limit for each problem
  57  scalar time_limit;
  58  *time_limit=%TIMELIM%;
  59  time_limit=2250;
  60   
  61   
  62  * Import the SORTED file
  63  table scenario_sorted(scen,*)
  65  *$INCLUDE %SORTEDFILE%.csv
  66  *$INCLUDE scenario_sorted_100_1_01.csv
  67  *$INCLUDE scenario_sorted_100_2_01.csv
  68  *$INCLUDE scenario_sorted_100_3_01.csv
  69  *$INCLUDE scenario_sorted_100_4_01.csv
  70  *$INCLUDE scenario_sorted_100_5_01.csv
  71  *$INCLUDE scenario_sorted_100_6_01.csv
  72  *$INCLUDE scenario_sorted_100_7_01.csv
  73  *$INCLUDE scenario_sorted_100_8_01.csv
  74  *$INCLUDE scenario_sorted_100_9_01.csv
  75  *$INCLUDE scenario_sorted_100_10_01.csv
  76  *$INCLUDE scenario_sorted_100_11_01.csv
  77  *$INCLUDE scenario_sorted_100_12_01.csv
  78  *$INCLUDE scenario_sorted_100_13_01.csv
  79  *$INCLUDE scenario_sorted_100_14_01.csv
  80  *$INCLUDE scenario_sorted_100_15_01.csv
  81  *$INCLUDE scenario_sorted_100_16_01.csv
  82  *$INCLUDE scenario_sorted_100_17_01.csv
  83  *$INCLUDE scenario_sorted_100_18_01.csv
  84  *$INCLUDE scenario_sorted_100_19_01.csv
  85  *$INCLUDE scenario_sorted_100_20_01.csv
  86  *$INCLUDE scenario_sorted_100_1_05.csv
  87  *$INCLUDE scenario_sorted_100_2_05.csv
  88  *$INCLUDE scenario_sorted_100_3_05.csv
  89  *$INCLUDE scenario_sorted_100_4_05.csv
  90  *$INCLUDE scenario_sorted_100_5_05.csv
  91  *$INCLUDE scenario_sorted_100_6_05.csv
  92  *$INCLUDE scenario_sorted_100_7_05.csv
  93  *$INCLUDE scenario_sorted_100_8_05.csv
  94  *$INCLUDE scenario_sorted_100_9_05.csv
  95  *$INCLUDE scenario_sorted_100_10_05.csv
  96  *$INCLUDE scenario_sorted_100_11_05.csv
  97  *$INCLUDE scenario_sorted_100_12_05.csv
  98  *$INCLUDE scenario_sorted_100_13_05.csv
  99  *$INCLUDE scenario_sorted_100_14_05.csv
 100  *$INCLUDE scenario_sorted_100_15_05.csv
 101  *$INCLUDE scenario_sorted_100_16_05.csv
 102  *$INCLUDE scenario_sorted_100_17_05.csv
 103  *$INCLUDE scenario_sorted_100_18_05.csv
 104  *$INCLUDE scenario_sorted_100_19_05.csv
 105  *$INCLUDE scenario_sorted_100_20_05.csv
INCLUDE    C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\scenario_sorted_20_05.csv
 107   ,value
 108  scen12,1
 109  scen5,0
 110  scen8,0
 111  scen3,0
 112  scen19,0
 113  scen1,0
 114  scen6,0
 115  scen14,0
 116  scen10,0
 117  scen9,0
 118  scen11,0
 119  scen7,0
 120  scen4,0
 121  scen15,0
 122  scen13,0
 123  scen2,0
 124  scen18,0
 125  scen16,0
 126  scen17,0
 127  scen20,0
 128  *$INCLUDE scenario_sorted_150_03.csv
 129  *$INCLUDE scenario_sorted_150_05.csv
 130  *$INCLUDE scenario_sorted_300_01.csv
 131  *$INCLUDE scenario_sorted_300_03.csv
 132  *$INCLUDE scenario_sorted_300_05.csv
 133  *$INCLUDE scenario_sorted_450_01.csv
 134  *$INCLUDE scenario_sorted_450_03.csv
 135  *$INCLUDE scenario_sorted_450_05.csv
 136  *$INCLUDE scenario_sorted_600_01.csv
 137  *$INCLUDE scenario_sorted_600_05.csv
 138  *$INCLUDE scenario_sorted_600_03.csv
 139  *$INCLUDE scenario_sorted_900_01.csv
 140  *$INCLUDE scenario_sorted_900_03.csv
 141  *$INCLUDE scenario_sorted_900_05.csv
 142  *$INCLUDE scenario_sorted_1200_01.csv
 143  *$INCLUDE scenario_sorted_1200_03.csv
 144  *$INCLUDE scenario_sorted_1200_05.csv
 145  *$INCLUDE scenario_sorted_2400_01.csv
 146  *$INCLUDE scenario_sorted_2400_05.csv
 148  ;
 149   
 150   
 151   
 152   
 153   
 154  ALIAS (T,TT);
 155  alias(scen,i);
 156   
 157  scalar n;
 158  n=card(scen);
 159   
 160  *Scalar which tells if LR converges
 161  scalar convergence;
 162   
 163  ** define battery  operation costs costs and solar selling prices
 164   
 165  TABLE PRICES(t,*)
INCLUDE    C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\wind_costs.csv
 168  ,REW,GEN
 169  t1,21.86631793,50
 170  t2,22.68762551,50
 171  t3,22.63231186,50
 172  t4,23.53977501,50
 173  t5,24.15305477,50
 174  t6,25.0022415,50
 175  t7,26.14884331,50
 176  t8,28.48265662,50
 177  t9,35.32421651,50
 178  t10,53.07988113,50
 179  t11,67.07745747,50
 180  t12,43.78264533,50
 181  t13,33.25218533,50
 182  t14,28.68827035,50
 183  t15,26.76175663,50
 184  t16,23.97472252,50
 185  t17,21.05077606,50
 186  t18,18.8721276,50
 187  t19,17.16537812,50
 188  t20,15.4798614,50
 189  t21,14.81514842,50
 190  t22,14.64047737,50
 191  t23,15.10197375,50
 192  t24,17.32390701,50
 194  ;
 195  *alias(costs, prices);
 196   
 197  Prices(t,'rew')     =  - Prices(t,'rew');
 198  Prices(t,'gen')    =  - Prices(t,'gen');
 199  ** define solar scenarios at all time periods
 200   
 201   
 202  * Scaling of wind power scenarios ;
 203  scalar scale ;
 204  scale = 1;
 205  wind(scen,t) = scale* wind(scen,t) ;
 206  * Remove too many decimals in Solar
 207  wind(scen,t) = round(wind(scen,t),2) ;
 208   
 209   
 210  scalar PROBABILITY;
 211  PROBABILITY = 1/CARD(scen);
 212   
 213   
 214  parameters max_store(t), min_store(t), max_charge, max_discharge;
 215   
 216   
 217  ** define tolerance threshold
 218  SCALAR threshold;
 219  threshold = floor(card(scen)*TOL)  ;
 220   
      parameter BigX, LowX, X_0 maximum minimum initial energy stored ;
      parameter BigM(scen,t) find a good BigM ;
       
      BigX = 960 ;
      LowX = 0.2* BigX ;
      X_0  = 0.5* BigX ;
      max_charge =  0.5* BigX ;
      max_discharge =  0.5* BigX ;
 231   
 232  ************** Find a Big M
 233   
 234  * find Ntol + 1st value
 235  parameter maxwind(t), minwind(t), dummywind(w,t) ;
 236  maxwind(t) =smax(w,wind(w,t)) ;
 237  dummywind(w,t) = wind(w,t) ;
 238   
 239  scalar it ;
 240  it = floor(card(w)*tol) + 1;
 241   
 242  * index of it
 243  set dummy(w);
 244  * make the dum_iter go till at least the size of it
 245  set dum_iter /dum_iter1*dum_iter100/;
 246  loop(t,
 247  loop(dum_iter$(ord(dum_iter)le it),
 248  * find the smallest wind value for this t
 249           minwind(t) = smin(w,dummywind(w,t)) ;
 250  * index of smallest wind value
 251           dummy(w) = yes$(dummywind(w,t) eq minwind(t)) ;
 252  * make the smallest wind value large
 253           dummywind(w,t)$dummy(w) =maxwind(t) ;
 254  ); );
 255  display minwind ;
 256   
 257   
 258   
 259  parameter BigMM(w), BigM(w,t);
 260  BigMM(w)= smax(t, wind(w,t));
 261  BigM(w,t)= G - wind(w,t) + minwind(t);
 262   
 263   
 264  scalar run_time_total, start_time, end_time, LP_time, bound_time, lr_time ;

**** LIST OF STRAY NAMES - CHECK DECLARATIONS FOR SPURIOUS COMMAS
**** STRAY NAME start_cost OF TYPE PARAM
**** STRAY NAME max_charge OF TYPE PARAM
**** STRAY NAME max_discharge OF TYPE PARAM
**** STRAY NAME start_time OF TYPE PARAM
**** STRAY NAME end_time OF TYPE PARAM
**** STRAY NAME LP_time OF TYPE PARAM
**** STRAY NAME bound_time OF TYPE PARAM
**** STRAY NAME lr_time OF TYPE PARAM
GAMS 32.2.0  rc62c018 Released Aug 26, 2020 WEX-WEI x86 64bit/MS Windows - 09/20/21 11:07:17 Page 2
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
Include File Summary


   SEQ   GLOBAL TYPE      PARENT   LOCAL  FILENAME

     1        1 INPUT          0       0  C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\inputME.gms
     2       22 INCLUDE        1      22  .C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\wind_scenarios_20.csv
     3      106 INCLUDE        1      85  .C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\scenario_sorted_20_05.csv
     4      167 INCLUDE        1     125  .C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\wind_costs.csv


COMPILATION TIME     =        0.000 SECONDS      3 MB  32.2.0 rc62c018 WEX-WEI
GAMS 32.2.0  rc62c018 Released Aug 26, 2020 WEX-WEI x86 64bit/MS Windows - 09/20/21 11:07:17 Page 3
G e n e r a l   A l g e b r a i c   M o d e l i n g   S y s t e m
E x e c u t i o n


----    255 PARAMETER minwind  

t1  24.010,    t2  15.730,    t3  10.830,    t4   0.590,    t5   1.150,    t6   6.020,    t7   1.570,    t8   2.700,    t9   2.420,    t10  2.450,    t11  4.360,    t12  3.710,    t13  0.660,    t14  0.510,    t15  4.150,    t16 17.180,    t17 12.830,    t18  7.680,    t19 19.060,    t20 18.920,    t21 16.030,    t22 17.930,    t23 10.250,    t24  2.630



EXECUTION TIME       =        0.000 SECONDS      4 MB  32.2.0 rc62c018 WEX-WEI


USER: Small MUD - 5 User License                     S200323/0001AN-GEN
      Friedrich-Alexander-Universitaet Erlangen-Nurnberg         DC7699
      License for teaching and research at degree granting institutions


**** FILE SUMMARY

Input      C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\inputME.gms
Output     C:\Users\charl\OneDrive\Dokumente\A_Uni\HiWi\ArticleSubgradient\Code\150_01\inputME.lst
